.row
  .col-lg-12.col-md-12.col-sm-12.col-xs-12
    %h1
      = t('order.new')

.row
  .col-lg-12.col-md-12.col-sm-12.col-xs-12
    = simple_form_for([:admin, @order]) do |f|
      %table.table.table-hover
        %thead
          %tr
            %td= t('user.id')
            %td= t('user.email')
      
        %tr
          %td
            = f.input :user_id, label: false, placeholder: t('user.search.id'), input_html: { id: 'users-search-id', autofocus: 'autofocus' }
            .results#users-search-id-results
            .results#users-search-id-no-results
          %td
            = f.input :email, as: :fake, label: false, placeholder: t('user.search.email'), input_html: { id: 'users-search-email', autofocus: 'autofocus', formnovalidate: true, autocomplete: 'off' }
            .results#users-search-email-results
            .results#users-search-email-no-results

      
      %table.table.table-hover
        %thead
          %tr
            %td= t("product.number")
            %td= t("product.name")
            %td= t("Quantity")
            %td= t("Price") + " (NT)"
            %td


        = f.fields_for :order_items do |p|
          %tr
            %td
              = p.input :product_id, label: false, placeholder: t('order.search.product.id'), input_html: { id: 'products-search-id', autofocus: 'autofocus' }
              .results#products-search-id-results
              .results#products-search-id-no-results
            %td
              = p.input :product_name, label: false, placeholder: t('order.search.product.name'), input_html: { id: 'products-search-name', autofocus: 'autofocus' }
              .results#products-search-name-results
              .results#products-search-name-no-results
            %td
              = p.input :quantity, input_html: { value: 1, min: 1, class: 'quantity' }, wrapper_html: { class: 'item-quantity-field' }, label: false
            %td.price#products-search-price= '0'
            %td

        %tfoot
          %tr
            %td{ colspan: "3" }= t("Total")
            %td{ id: 'total' }
            %td


      %h1
        = t('Receiver')
      %hr

      .row
        .col-md-12
          %table.table.table-hover
            = f.fields_for :receipt do |u|
              %tr
                %th= t('Receiver')
                %td= u.input :name, label: false
              %tr
                %th= t('Phone')
                %td= u.input :tel, label: false
              %tr
                %th= t('Country')
                %td= u.input :country, label: false, format: :with_alpha2
              %tr
                %th= t('City')
                %td= u.input :city, label: false
              %tr
                %th= t('Address')
                %td= u.input :address, label: false

      .row
        .col-md-12
          = link_to t('back'), admin_orders_path, class: 'btn btn-default'
          = f.submit t('confirm'), class: 'btn btn-primary'

:javascript
  $(function() {
    var product = new app.Products;
    var user = new app.Users;
  });
  